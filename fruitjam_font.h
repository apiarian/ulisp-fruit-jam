// fruitjam_font.h — unscii-8-thin bitmap font + rendering functions
//
// Font data auto-generated from unscii-8-thin.hex by tools/gen_cp437_font.py
// Rendering functions hand-written for direct 8bpp framebuffer access (DVHSTX8).
//
// 8×8 row-major bitmap font, 256 glyphs in CP437 layout
// 8 bytes per glyph, one byte per row, MSB = leftmost pixel
// Total: 2048 bytes
//
// Slots 0x00–0x7F: standard ASCII
// Slots 0x01–0x1F: CP437 graphical characters (☺♥♠♪► etc.)
// Slots 0x80–0xFF: CP437 extended (accented, box-drawing, blocks, Greek, math)
//
// Used by:
//   - fruitjam_terminal.h (term_draw_cell) for terminal text
//   - ulisp-fruit-jam.ino (fn_drawchar, gfxwrite) for graphics-mode text

#ifndef FRUITJAM_FONT_H
#define FRUITJAM_FONT_H

#include <stdint.h>

static const uint8_t unscii_8_thin[256 * 8] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0x00 NUL (blank)
  0x7E, 0x81, 0xA5, 0x81, 0xBD, 0x99, 0x81, 0x7E,  // 0x01 ☺ smiley
  0x7E, 0xFF, 0xDB, 0xFF, 0xC3, 0xE7, 0xFF, 0x7E,  // 0x02 ☻ smiley inv
  0x6C, 0xFE, 0xFE, 0xFE, 0x7C, 0x38, 0x10, 0x00,  // 0x03 ♥ heart
  0x10, 0x38, 0x7C, 0xFE, 0x7C, 0x38, 0x10, 0x00,  // 0x04 ♦ diamond
  0x18, 0x18, 0x66, 0x66, 0x18, 0x18, 0x3C, 0x00,  // 0x05 ♣ club
  0x10, 0x38, 0x7C, 0xFE, 0xFE, 0x38, 0x7C, 0x00,  // 0x06 ♠ spade
  0x00, 0x00, 0x18, 0x3C, 0x3C, 0x18, 0x00, 0x00,  // 0x07 • bullet
  0xFF, 0xFF, 0xE7, 0xC3, 0xC3, 0xE7, 0xFF, 0xFF,  // 0x08 ◘ inv bullet
  0x00, 0x3C, 0x66, 0x42, 0x42, 0x66, 0x3C, 0x00,  // 0x09 ○ circle
  0xFF, 0xC3, 0x99, 0xBD, 0xBD, 0x99, 0xC3, 0xFF,  // 0x0A ◙ inv circle
  0x0F, 0x07, 0x0F, 0x7D, 0xCC, 0xCC, 0xCC, 0x78,  // 0x0B ♂ male
  0x3C, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x7E, 0x18,  // 0x0C ♀ female
  0x18, 0x1C, 0x1E, 0x1B, 0x18, 0x78, 0xF8, 0x70,  // 0x0D ♪ note
  0x7F, 0x63, 0x63, 0x63, 0x63, 0x67, 0xE6, 0xC0,  // 0x0E ♫ notes
  0x00, 0x3C, 0x42, 0x5A, 0x5A, 0x42, 0x3C, 0x00,  // 0x0F ☼ sun
  0x00, 0xE0, 0xFC, 0xFF, 0xFC, 0xE0, 0x00, 0x00,  // 0x10 ► tri right
  0x00, 0x07, 0x3F, 0xFF, 0x3F, 0x07, 0x00, 0x00,  // 0x11 ◄ tri left
  0x18, 0x3C, 0x7E, 0x18, 0x18, 0x7E, 0x3C, 0x18,  // 0x12 ↕ updown
  0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x66, 0x00,  // 0x13 ‼ dbl exclam
  0x3E, 0x7A, 0x7A, 0x3A, 0x1A, 0x1A, 0x1A, 0x00,  // 0x14 ¶ pilcrow
  0x3C, 0x60, 0x3C, 0x66, 0x66, 0x3C, 0x06, 0x3C,  // 0x15 § section
  0x00, 0x00, 0x00, 0x00, 0x7E, 0x7E, 0x7E, 0x00,  // 0x16 ▬ bar
  0x18, 0x3C, 0x7E, 0x18, 0x7E, 0x3C, 0x18, 0xFF,  // 0x17 ↨ updown base
  0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18,  // 0x18 ↑ up
  0x18, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x3C, 0x18,  // 0x19 ↓ down
  0x00, 0x08, 0x0C, 0xFE, 0xFE, 0x0C, 0x08, 0x00,  // 0x1A → right
  0x00, 0x10, 0x30, 0x7F, 0x7F, 0x30, 0x10, 0x00,  // 0x1B ← left
  0x00, 0x00, 0xC0, 0xC0, 0xC0, 0xFE, 0x00, 0x00,  // 0x1C ∟ right angle
  0x00, 0x24, 0x66, 0xFF, 0xFF, 0x66, 0x24, 0x00,  // 0x1D ↔ leftright
  0x18, 0x18, 0x3C, 0x3C, 0x7E, 0x7E, 0xFF, 0xFF,  // 0x1E ▲ tri up
  0xFF, 0xFF, 0x7E, 0x7E, 0x3C, 0x3C, 0x18, 0x18,  // 0x1F ▼ tri down
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0x20 ' '
  0x10, 0x10, 0x10, 0x10, 0x00, 0x00, 0x10, 0x00,  // 0x21 '!'
  0x24, 0x24, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0x22 '"'
  0x24, 0x24, 0x7E, 0x24, 0x7E, 0x24, 0x24, 0x00,  // 0x23 '#'
  0x10, 0x3C, 0x50, 0x38, 0x14, 0x78, 0x10, 0x00,  // 0x24 '$'
  0x00, 0x62, 0x64, 0x08, 0x10, 0x26, 0x46, 0x00,  // 0x25 '%'
  0x30, 0x48, 0x48, 0x30, 0x4A, 0x44, 0x3A, 0x00,  // 0x26 '&'
  0x08, 0x10, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0x27 '''
  0x08, 0x10, 0x20, 0x20, 0x20, 0x10, 0x08, 0x00,  // 0x28 '('
  0x20, 0x10, 0x08, 0x08, 0x08, 0x10, 0x20, 0x00,  // 0x29 ')'
  0x10, 0x54, 0x38, 0x10, 0x38, 0x54, 0x10, 0x00,  // 0x2A '*'
  0x00, 0x10, 0x10, 0x7C, 0x10, 0x10, 0x00, 0x00,  // 0x2B '+'
  0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x10,  // 0x2C ','
  0x00, 0x00, 0x00, 0x00, 0x7C, 0x00, 0x00, 0x00,  // 0x2D '-'
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00,  // 0x2E '.'
  0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x00,  // 0x2F '/'
  0x38, 0x44, 0x4C, 0x54, 0x64, 0x44, 0x38, 0x00,  // 0x30 '0'
  0x10, 0x30, 0x50, 0x10, 0x10, 0x10, 0x7C, 0x00,  // 0x31 '1'
  0x38, 0x44, 0x04, 0x08, 0x30, 0x40, 0x7C, 0x00,  // 0x32 '2'
  0x38, 0x44, 0x04, 0x18, 0x04, 0x44, 0x38, 0x00,  // 0x33 '3'
  0x08, 0x18, 0x28, 0x48, 0x7C, 0x08, 0x08, 0x00,  // 0x34 '4'
  0x7C, 0x40, 0x78, 0x04, 0x04, 0x44, 0x38, 0x00,  // 0x35 '5'
  0x1C, 0x20, 0x40, 0x78, 0x44, 0x44, 0x38, 0x00,  // 0x36 '6'
  0x7C, 0x04, 0x08, 0x10, 0x20, 0x20, 0x20, 0x00,  // 0x37 '7'
  0x38, 0x44, 0x44, 0x38, 0x44, 0x44, 0x38, 0x00,  // 0x38 '8'
  0x38, 0x44, 0x44, 0x3C, 0x04, 0x08, 0x70, 0x00,  // 0x39 '9'
  0x00, 0x00, 0x10, 0x00, 0x00, 0x10, 0x00, 0x00,  // 0x3A ':'
  0x00, 0x00, 0x10, 0x00, 0x00, 0x10, 0x10, 0x20,  // 0x3B ';'
  0x08, 0x10, 0x20, 0x40, 0x20, 0x10, 0x08, 0x00,  // 0x3C '<'
  0x00, 0x00, 0x7C, 0x00, 0x7C, 0x00, 0x00, 0x00,  // 0x3D '='
  0x20, 0x10, 0x08, 0x04, 0x08, 0x10, 0x20, 0x00,  // 0x3E '>'
  0x3C, 0x42, 0x04, 0x08, 0x08, 0x00, 0x08, 0x00,  // 0x3F '?'
  0x3C, 0x42, 0x4A, 0x56, 0x4C, 0x40, 0x3C, 0x00,  // 0x40 '@'
  0x18, 0x24, 0x42, 0x7E, 0x42, 0x42, 0x42, 0x00,  // 0x41 'A'
  0x7C, 0x42, 0x42, 0x7C, 0x42, 0x42, 0x7C, 0x00,  // 0x42 'B'
  0x3C, 0x42, 0x40, 0x40, 0x40, 0x42, 0x3C, 0x00,  // 0x43 'C'
  0x78, 0x44, 0x42, 0x42, 0x42, 0x44, 0x78, 0x00,  // 0x44 'D'
  0x7E, 0x40, 0x40, 0x78, 0x40, 0x40, 0x7E, 0x00,  // 0x45 'E'
  0x7E, 0x40, 0x40, 0x78, 0x40, 0x40, 0x40, 0x00,  // 0x46 'F'
  0x3C, 0x42, 0x40, 0x4E, 0x42, 0x42, 0x3C, 0x00,  // 0x47 'G'
  0x42, 0x42, 0x42, 0x7E, 0x42, 0x42, 0x42, 0x00,  // 0x48 'H'
  0x38, 0x10, 0x10, 0x10, 0x10, 0x10, 0x38, 0x00,  // 0x49 'I'
  0x04, 0x04, 0x04, 0x04, 0x04, 0x44, 0x38, 0x00,  // 0x4A 'J'
  0x42, 0x44, 0x48, 0x70, 0x48, 0x44, 0x42, 0x00,  // 0x4B 'K'
  0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x7E, 0x00,  // 0x4C 'L'
  0x42, 0x66, 0x5A, 0x42, 0x42, 0x42, 0x42, 0x00,  // 0x4D 'M'
  0x42, 0x62, 0x52, 0x4A, 0x46, 0x42, 0x42, 0x00,  // 0x4E 'N'
  0x3C, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3C, 0x00,  // 0x4F 'O'
  0x7C, 0x42, 0x42, 0x7C, 0x40, 0x40, 0x40, 0x00,  // 0x50 'P'
  0x3C, 0x42, 0x42, 0x42, 0x4A, 0x44, 0x3A, 0x00,  // 0x51 'Q'
  0x7C, 0x42, 0x42, 0x7C, 0x48, 0x44, 0x42, 0x00,  // 0x52 'R'
  0x3C, 0x42, 0x40, 0x3C, 0x02, 0x42, 0x3C, 0x00,  // 0x53 'S'
  0x7C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00,  // 0x54 'T'
  0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3C, 0x00,  // 0x55 'U'
  0x42, 0x42, 0x42, 0x42, 0x42, 0x24, 0x18, 0x00,  // 0x56 'V'
  0x42, 0x42, 0x42, 0x42, 0x5A, 0x66, 0x42, 0x00,  // 0x57 'W'
  0x42, 0x42, 0x24, 0x18, 0x24, 0x42, 0x42, 0x00,  // 0x58 'X'
  0x44, 0x44, 0x44, 0x38, 0x10, 0x10, 0x10, 0x00,  // 0x59 'Y'
  0x7C, 0x04, 0x08, 0x10, 0x20, 0x40, 0x7C, 0x00,  // 0x5A 'Z'
  0x38, 0x20, 0x20, 0x20, 0x20, 0x20, 0x38, 0x00,  // 0x5B '['
  0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x00,  // 0x5C '\'
  0x38, 0x08, 0x08, 0x08, 0x08, 0x08, 0x38, 0x00,  // 0x5D ']'
  0x10, 0x28, 0x44, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0x5E '^'
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7C,  // 0x5F '_'
  0x20, 0x10, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0x60 '`'
  0x00, 0x00, 0x38, 0x04, 0x3C, 0x44, 0x3C, 0x00,  // 0x61 'a'
  0x40, 0x40, 0x78, 0x44, 0x44, 0x44, 0x78, 0x00,  // 0x62 'b'
  0x00, 0x00, 0x38, 0x44, 0x40, 0x44, 0x38, 0x00,  // 0x63 'c'
  0x04, 0x04, 0x3C, 0x44, 0x44, 0x44, 0x3C, 0x00,  // 0x64 'd'
  0x00, 0x00, 0x38, 0x44, 0x7C, 0x40, 0x38, 0x00,  // 0x65 'e'
  0x0C, 0x12, 0x10, 0x7C, 0x10, 0x10, 0x10, 0x00,  // 0x66 'f'
  0x00, 0x00, 0x3C, 0x44, 0x44, 0x3C, 0x04, 0x38,  // 0x67 'g'
  0x40, 0x40, 0x78, 0x44, 0x44, 0x44, 0x44, 0x00,  // 0x68 'h'
  0x10, 0x00, 0x30, 0x10, 0x10, 0x10, 0x38, 0x00,  // 0x69 'i'
  0x04, 0x00, 0x0C, 0x04, 0x04, 0x04, 0x24, 0x18,  // 0x6A 'j'
  0x40, 0x40, 0x44, 0x48, 0x70, 0x48, 0x44, 0x00,  // 0x6B 'k'
  0x30, 0x10, 0x10, 0x10, 0x10, 0x10, 0x38, 0x00,  // 0x6C 'l'
  0x00, 0x00, 0x68, 0x54, 0x54, 0x54, 0x54, 0x00,  // 0x6D 'm'
  0x00, 0x00, 0x78, 0x44, 0x44, 0x44, 0x44, 0x00,  // 0x6E 'n'
  0x00, 0x00, 0x38, 0x44, 0x44, 0x44, 0x38, 0x00,  // 0x6F 'o'
  0x00, 0x00, 0x78, 0x44, 0x44, 0x78, 0x40, 0x40,  // 0x70 'p'
  0x00, 0x00, 0x3C, 0x44, 0x44, 0x3C, 0x04, 0x04,  // 0x71 'q'
  0x00, 0x00, 0x5C, 0x60, 0x40, 0x40, 0x40, 0x00,  // 0x72 'r'
  0x00, 0x00, 0x3C, 0x40, 0x38, 0x04, 0x78, 0x00,  // 0x73 's'
  0x20, 0x20, 0x78, 0x20, 0x20, 0x24, 0x18, 0x00,  // 0x74 't'
  0x00, 0x00, 0x44, 0x44, 0x44, 0x44, 0x38, 0x00,  // 0x75 'u'
  0x00, 0x00, 0x44, 0x44, 0x44, 0x28, 0x10, 0x00,  // 0x76 'v'
  0x00, 0x00, 0x44, 0x54, 0x54, 0x54, 0x28, 0x00,  // 0x77 'w'
  0x00, 0x00, 0x44, 0x28, 0x10, 0x28, 0x44, 0x00,  // 0x78 'x'
  0x00, 0x00, 0x44, 0x44, 0x44, 0x3C, 0x04, 0x38,  // 0x79 'y'
  0x00, 0x00, 0x7C, 0x08, 0x10, 0x20, 0x7C, 0x00,  // 0x7A 'z'
  0x18, 0x20, 0x20, 0x40, 0x20, 0x20, 0x18, 0x00,  // 0x7B '{'
  0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10,  // 0x7C '|'
  0x30, 0x08, 0x08, 0x04, 0x08, 0x08, 0x30, 0x00,  // 0x7D '}'
  0x20, 0x54, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0x7E '~'
  0xC0, 0xA0, 0xAE, 0xA4, 0xC4, 0x04, 0x04, 0x00,  // 0x7F DEL
  0x3C, 0x42, 0x40, 0x40, 0x40, 0x42, 0x3C, 0x18,  // 0x80 Ç c-cedilla
  0x24, 0x00, 0x44, 0x44, 0x44, 0x44, 0x38, 0x00,  // 0x81 ü u-diaeresis
  0x0E, 0x00, 0x38, 0x44, 0x7C, 0x40, 0x38, 0x00,  // 0x82 é e-acute
  0x10, 0x28, 0x00, 0x3E, 0x42, 0x82, 0x7E, 0x00,  // 0x83 â a-circumflex
  0x24, 0x00, 0x38, 0x04, 0x3C, 0x44, 0x3C, 0x00,  // 0x84 ä a-diaeresis
  0x70, 0x00, 0x38, 0x04, 0x3C, 0x44, 0x3C, 0x00,  // 0x85 à a-grave
  0x18, 0x18, 0x00, 0x3E, 0x42, 0x82, 0x7E, 0x00,  // 0x86 å a-ring
  0x00, 0x00, 0x38, 0x44, 0x40, 0x44, 0x38, 0x18,  // 0x87 ç c-cedilla
  0x10, 0x28, 0x00, 0x3C, 0x7E, 0x40, 0x3C, 0x00,  // 0x88 ê e-circumflex
  0x24, 0x00, 0x38, 0x44, 0x7C, 0x40, 0x38, 0x00,  // 0x89 ë e-diaeresis
  0x70, 0x00, 0x38, 0x44, 0x7C, 0x40, 0x38, 0x00,  // 0x8A è e-grave
  0x24, 0x00, 0x30, 0x10, 0x10, 0x10, 0x38, 0x00,  // 0x8B ï i-diaeresis
  0x10, 0x28, 0x00, 0x30, 0x10, 0x10, 0x38, 0x00,  // 0x8C î i-circumflex
  0x70, 0x00, 0x30, 0x10, 0x10, 0x10, 0x38, 0x00,  // 0x8D ì i-grave
  0x24, 0x00, 0x3C, 0x42, 0x7E, 0x42, 0x42, 0x00,  // 0x8E Ä A-diaeresis
  0x18, 0x18, 0x00, 0x3C, 0x66, 0x7E, 0x66, 0x00,  // 0x8F Å A-ring
  0x0E, 0x00, 0xFE, 0xC0, 0xF8, 0xC0, 0xFE, 0x00,  // 0x90 É E-acute
  0x00, 0x00, 0x7E, 0x1B, 0x7F, 0xD8, 0x77, 0x00,  // 0x91 æ ae-ligature
  0x3F, 0x6C, 0xCC, 0xFE, 0xCC, 0xCC, 0xCF, 0x00,  // 0x92 Æ AE-ligature
  0x10, 0x28, 0x00, 0x3C, 0x66, 0x66, 0x3C, 0x00,  // 0x93 ô o-circumflex
  0x24, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x00,  // 0x94 ö o-diaeresis
  0x70, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x00,  // 0x95 ò o-grave
  0x10, 0x28, 0x00, 0x44, 0x44, 0x44, 0x38, 0x00,  // 0x96 û u-circumflex
  0x70, 0x00, 0x44, 0x44, 0x44, 0x44, 0x38, 0x00,  // 0x97 ù u-grave
  0x24, 0x00, 0x44, 0x44, 0x44, 0x3C, 0x04, 0x38,  // 0x98 ÿ y-diaeresis
  0x24, 0x00, 0x3C, 0x42, 0x42, 0x42, 0x3C, 0x00,  // 0x99 Ö O-diaeresis
  0x24, 0x00, 0x82, 0x82, 0x82, 0x82, 0x7C, 0x00,  // 0x9A Ü U-diaeresis
  0x00, 0x18, 0x7E, 0xD8, 0xD8, 0x7E, 0x18, 0x00,  // 0x9B ¢ cent
  0x38, 0x6C, 0x60, 0xF0, 0x60, 0x66, 0xFC, 0x00,  // 0x9C £ pound
  0xC3, 0x66, 0x3C, 0x18, 0x3C, 0x18, 0x18, 0x00,  // 0x9D ¥ yen
  0xF8, 0xCC, 0xCC, 0xFA, 0xC6, 0xCF, 0xC6, 0xC7,  // 0x9E ₧ peseta
  0x0E, 0x1B, 0x18, 0x3C, 0x18, 0x18, 0xD8, 0x70,  // 0x9F ƒ florin
  0x0E, 0x00, 0x38, 0x04, 0x3C, 0x44, 0x3C, 0x00,  // 0xA0 á a-acute
  0x0E, 0x00, 0x30, 0x10, 0x10, 0x10, 0x38, 0x00,  // 0xA1 í i-acute
  0x0E, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x00,  // 0xA2 ó o-acute
  0x0E, 0x00, 0x44, 0x44, 0x44, 0x44, 0x38, 0x00,  // 0xA3 ú u-acute
  0x62, 0x9C, 0x00, 0x7C, 0x42, 0x42, 0x42, 0x00,  // 0xA4 ñ n-tilde
  0x62, 0x9C, 0x00, 0x44, 0x74, 0x5C, 0x44, 0x00,  // 0xA5 Ñ N-tilde
  0x3C, 0x6C, 0x6C, 0x3E, 0x00, 0x7E, 0x00, 0x00,  // 0xA6 ª fem ordinal
  0x38, 0x6C, 0x6C, 0x38, 0x00, 0x7C, 0x00, 0x00,  // 0xA7 º masc ordinal
  0x18, 0x00, 0x18, 0x30, 0x60, 0x66, 0x3C, 0x00,  // 0xA8 ¿ inv question
  0x00, 0x7E, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00,  // 0xA9 ⌐ rev not
  0x00, 0x7E, 0x06, 0x06, 0x00, 0x00, 0x00, 0x00,  // 0xAA ¬ not
  0x40, 0xC6, 0x4C, 0x5E, 0x33, 0x66, 0xCC, 0x0F,  // 0xAB ½ one-half
  0x40, 0xC6, 0x4C, 0x5A, 0x36, 0x6A, 0xCF, 0x02,  // 0xAC ¼ one-quarter
  0x18, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00,  // 0xAD ¡ inv exclam
  0x00, 0x33, 0x66, 0xCC, 0x66, 0x33, 0x00, 0x00,  // 0xAE « left guillemet
  0x00, 0xCC, 0x66, 0x33, 0x66, 0xCC, 0x00, 0x00,  // 0xAF » right guillemet
  0x22, 0x88, 0x22, 0x88, 0x22, 0x88, 0x22, 0x88,  // 0xB0 ░ light shade
  0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55,  // 0xB1 ▒ med shade
  0xDD, 0x77, 0xDD, 0x77, 0xDD, 0x77, 0xDD, 0x77,  // 0xB2 ▓ dark shade
  0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,  // 0xB3 │ vert
  0x18, 0x18, 0x18, 0xF8, 0xF8, 0x18, 0x18, 0x18,  // 0xB4 ┤ right tee
  0x18, 0x18, 0xF8, 0x18, 0xF8, 0x18, 0x18, 0x18,  // 0xB5 ╡ dbl right tee
  0x6C, 0x6C, 0x6C, 0xEC, 0xEC, 0x6C, 0x6C, 0x6C,  // 0xB6 ╢ dbl right tee
  0x00, 0x00, 0x00, 0xFC, 0xFC, 0x6C, 0x6C, 0x6C,  // 0xB7 ╖ dbl down-left
  0x00, 0x00, 0xF8, 0x18, 0xF8, 0x18, 0x18, 0x18,  // 0xB8 ╕ dbl down-left
  0x6C, 0x6C, 0xEC, 0x0C, 0xEC, 0x6C, 0x6C, 0x6C,  // 0xB9 ╣ dbl right tee
  0x6C, 0x6C, 0x6C, 0x6C, 0x6C, 0x6C, 0x6C, 0x6C,  // 0xBA ║ dbl vert
  0x00, 0x00, 0xFC, 0x0C, 0xEC, 0x6C, 0x6C, 0x6C,  // 0xBB ╗ dbl down-left
  0x6C, 0x6C, 0xEC, 0x0C, 0xFC, 0x00, 0x00, 0x00,  // 0xBC ╝ dbl up-left
  0x6C, 0x6C, 0x6C, 0xFC, 0xFC, 0x00, 0x00, 0x00,  // 0xBD ╜ dbl up-left
  0x18, 0x18, 0xF8, 0x18, 0xF8, 0x00, 0x00, 0x00,  // 0xBE ╛ dbl up-left
  0x00, 0x00, 0x00, 0xF8, 0xF8, 0x18, 0x18, 0x18,  // 0xBF ┐ down-left
  0x18, 0x18, 0x18, 0x1F, 0x1F, 0x00, 0x00, 0x00,  // 0xC0 └ up-right
  0x18, 0x18, 0x18, 0xFF, 0xFF, 0x00, 0x00, 0x00,  // 0xC1 ┴ up tee
  0x00, 0x00, 0x00, 0xFF, 0xFF, 0x18, 0x18, 0x18,  // 0xC2 ┬ down tee
  0x18, 0x18, 0x18, 0x1F, 0x1F, 0x18, 0x18, 0x18,  // 0xC3 ├ left tee
  0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00,  // 0xC4 ─ horiz
  0x18, 0x18, 0x18, 0xFF, 0xFF, 0x18, 0x18, 0x18,  // 0xC5 ┼ cross
  0x18, 0x18, 0x1F, 0x18, 0x1F, 0x18, 0x18, 0x18,  // 0xC6 ╞ dbl left tee
  0x6C, 0x6C, 0x6C, 0x6F, 0x6F, 0x6C, 0x6C, 0x6C,  // 0xC7 ╟ dbl left tee
  0x6C, 0x6C, 0x6F, 0x60, 0x7F, 0x00, 0x00, 0x00,  // 0xC8 ╚ dbl up-right
  0x00, 0x00, 0x7F, 0x60, 0x6F, 0x6C, 0x6C, 0x6C,  // 0xC9 ╔ dbl down-right
  0x6C, 0x6C, 0xEF, 0x00, 0xFF, 0x00, 0x00, 0x00,  // 0xCA ╩ dbl up tee
  0x00, 0x00, 0xFF, 0x00, 0xEF, 0x6C, 0x6C, 0x6C,  // 0xCB ╦ dbl down tee
  0x6C, 0x6C, 0x6F, 0x60, 0x6F, 0x6C, 0x6C, 0x6C,  // 0xCC ╠ dbl left tee
  0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00,  // 0xCD ═ dbl horiz
  0x6C, 0x6C, 0xEF, 0x00, 0xEF, 0x6C, 0x6C, 0x6C,  // 0xCE ╬ dbl cross
  0x18, 0x18, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00,  // 0xCF ╧ dbl up tee
  0x6C, 0x6C, 0x6C, 0xFF, 0xFF, 0x00, 0x00, 0x00,  // 0xD0 ╨ dbl up tee
  0x00, 0x00, 0xFF, 0x00, 0xFF, 0x18, 0x18, 0x18,  // 0xD1 ╤ dbl down tee
  0x00, 0x00, 0x00, 0xFF, 0xFF, 0x6C, 0x6C, 0x6C,  // 0xD2 ╥ dbl down tee
  0x6C, 0x6C, 0x6C, 0x7F, 0x7F, 0x00, 0x00, 0x00,  // 0xD3 ╙ dbl up-right
  0x18, 0x18, 0x1F, 0x18, 0x1F, 0x00, 0x00, 0x00,  // 0xD4 ╘ dbl up-right
  0x00, 0x00, 0x1F, 0x18, 0x1F, 0x18, 0x18, 0x18,  // 0xD5 ╒ dbl down-right
  0x00, 0x00, 0x00, 0x7F, 0x7F, 0x6C, 0x6C, 0x6C,  // 0xD6 ╓ dbl down-right
  0x6C, 0x6C, 0x6C, 0xFF, 0xFF, 0x6C, 0x6C, 0x6C,  // 0xD7 ╫ dbl cross
  0x18, 0x18, 0xFF, 0x18, 0xFF, 0x18, 0x18, 0x18,  // 0xD8 ╪ dbl cross
  0x18, 0x18, 0x18, 0xF8, 0xF8, 0x00, 0x00, 0x00,  // 0xD9 ┘ up-left
  0x00, 0x00, 0x00, 0x1F, 0x1F, 0x18, 0x18, 0x18,  // 0xDA ┌ down-right
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,  // 0xDB █ full block
  0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF,  // 0xDC ▄ lower half
  0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0,  // 0xDD ▌ left half
  0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F,  // 0xDE ▐ right half
  0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00,  // 0xDF ▀ upper half
  0x00, 0x00, 0x76, 0xCE, 0xC6, 0xCE, 0x76, 0x00,  // 0xE0 α alpha
  0x3C, 0x66, 0x66, 0x6C, 0x66, 0x66, 0x6C, 0x00,  // 0xE1 ß beta/eszett
  0x7E, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x00,  // 0xE2 Γ Gamma
  0x00, 0x00, 0xFF, 0x66, 0x66, 0x66, 0x66, 0x00,  // 0xE3 π pi
  0xFE, 0x60, 0x30, 0x18, 0x30, 0x60, 0xFE, 0x00,  // 0xE4 Σ Sigma
  0x00, 0x00, 0x7E, 0xCC, 0xC6, 0xC6, 0x7C, 0x00,  // 0xE5 σ sigma
  0x00, 0x00, 0x66, 0x66, 0x66, 0x7C, 0x60, 0xC0,  // 0xE6 µ mu/micro
  0x00, 0x00, 0x7E, 0x18, 0x18, 0x18, 0x0C, 0x00,  // 0xE7 τ tau
  0x10, 0x7C, 0xD6, 0xD6, 0xD6, 0x7C, 0x10, 0x00,  // 0xE8 Φ Phi
  0x7C, 0xC6, 0xC6, 0xFE, 0xC6, 0xC6, 0x7C, 0x00,  // 0xE9 Θ Theta
  0x7C, 0xC6, 0xC6, 0xC6, 0xC6, 0x6C, 0xEE, 0x00,  // 0xEA Ω Omega
  0xFE, 0x60, 0x30, 0x7C, 0xC6, 0xC6, 0x7C, 0x00,  // 0xEB δ delta
  0x00, 0x00, 0x76, 0xDB, 0xDB, 0x6E, 0x00, 0x00,  // 0xEC ∞ infinity
  0x00, 0x00, 0x6E, 0xDB, 0xDB, 0x7E, 0x18, 0x18,  // 0xED φ phi
  0x00, 0x00, 0x3E, 0x60, 0x3C, 0x60, 0x3E, 0x00,  // 0xEE ε epsilon
  0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00,  // 0xEF ∩ intersection
  0x00, 0x7E, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x00,  // 0xF0 ≡ identical
  0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x7E, 0x00,  // 0xF1 ± plus-minus
  0x30, 0x18, 0x0C, 0x18, 0x30, 0x00, 0x7E, 0x00,  // 0xF2 ≥ greater-equal
  0x0C, 0x18, 0x30, 0x18, 0x0C, 0x00, 0x7E, 0x00,  // 0xF3 ≤ less-equal
  0x0E, 0x1B, 0x1B, 0x18, 0x18, 0x18, 0x18, 0x18,  // 0xF4 ⌠ integral top
  0x18, 0x18, 0x18, 0x18, 0x18, 0xD8, 0xD8, 0x70,  // 0xF5 ⌡ integral bot
  0x18, 0x18, 0x00, 0x7E, 0x00, 0x18, 0x18, 0x00,  // 0xF6 ÷ division
  0x00, 0x76, 0xDC, 0x00, 0x76, 0xDC, 0x00, 0x00,  // 0xF7 ≈ approx
  0x3C, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0xF8 ° degree
  0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00,  // 0xF9 ∙ bullet op
  0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00,  // 0xFA · middle dot
  0x01, 0x03, 0x06, 0x8C, 0xD8, 0x70, 0x20, 0x00,  // 0xFB √ sqrt
  0x00, 0x78, 0x6C, 0x6C, 0x6C, 0x00, 0x00, 0x00,  // 0xFC ⁿ superscript n
  0x70, 0x18, 0x30, 0x60, 0x78, 0x00, 0x00, 0x00,  // 0xFD ² superscript 2
  0x00, 0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x00,  // 0xFE ■ filled square
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // 0xFF NBSP
};

// ---- Rendering functions ----
// These write directly into an 8bpp framebuffer (uint8_t* buffer, stride = screen width).
// They are used by both the terminal emulator and graphics-mode text functions.
// The display8 object (DVHSTX8) is declared in fruitjam_terminal.h and must be
// available when these functions are called.

// Draw a single 8×8 character at pixel position (x, y) with foreground/background colors.
// No clipping — caller must ensure (x, y) is within the framebuffer.
// This is the fast path for terminal rendering (size=1, no clipping needed).
static void fruitjam_draw_char_8x8(uint8_t *fb, int fb_width,
                                    int x, int y, unsigned char c,
                                    uint8_t fg, uint8_t bg) {
  const uint8_t *glyph = &unscii_8_thin[c * 8];
  uint8_t *row_ptr = fb + y * fb_width + x;
  for (int row = 0; row < 8; row++) {
    uint8_t bits = glyph[row];
    row_ptr[0] = (bits & 0x80) ? fg : bg;
    row_ptr[1] = (bits & 0x40) ? fg : bg;
    row_ptr[2] = (bits & 0x20) ? fg : bg;
    row_ptr[3] = (bits & 0x10) ? fg : bg;
    row_ptr[4] = (bits & 0x08) ? fg : bg;
    row_ptr[5] = (bits & 0x04) ? fg : bg;
    row_ptr[6] = (bits & 0x02) ? fg : bg;
    row_ptr[7] = (bits & 0x01) ? fg : bg;
    row_ptr += fb_width;
  }
}

// Draw a single 8×8 character with transparent background (foreground pixels only).
// Used when set-text-color is called with one argument (GFX convention: fg == bg).
static void fruitjam_draw_char_8x8_transparent(uint8_t *fb, int fb_width,
                                                int fb_height,
                                                int x, int y, unsigned char c,
                                                uint8_t fg) {
  if (x >= fb_width || y >= fb_height || (x + 8) <= 0 || (y + 8) <= 0) return;
  const uint8_t *glyph = &unscii_8_thin[c * 8];
  for (int row = 0; row < 8; row++) {
    int py = y + row;
    if (py < 0 || py >= fb_height) continue;
    uint8_t bits = glyph[row];
    uint8_t *row_ptr = fb + py * fb_width + x;
    for (int col = 0; col < 8; col++) {
      int px = x + col;
      if (px >= 0 && px < fb_width && (bits & (0x80 >> col)))
        row_ptr[col] = fg;
    }
  }
}

// Draw a scaled 8×8 character at pixel position (x, y).
// Each pixel is expanded to (size × size) pixels.
// Includes clipping against (clip_w, clip_h) screen bounds.
// Used by graphics-mode (draw-char x y c [fg bg size]) for size >= 1.
static void fruitjam_draw_char_8x8_scaled(uint8_t *fb, int fb_width, int fb_height,
                                           int x, int y, unsigned char c,
                                           uint8_t fg, uint8_t bg, int size) {
  if (size < 1) size = 1;
  // Quick reject if entirely off-screen
  if (x >= fb_width || y >= fb_height ||
      (x + 8 * size) <= 0 || (y + 8 * size) <= 0) return;

  const uint8_t *glyph = &unscii_8_thin[c * 8];
  for (int row = 0; row < 8; row++) {
    uint8_t bits = glyph[row];
    for (int col = 0; col < 8; col++) {
      uint8_t color = (bits & (0x80 >> col)) ? fg : bg;
      // Fill the size×size block for this pixel
      for (int sy = 0; sy < size; sy++) {
        int py = y + row * size + sy;
        if (py < 0 || py >= fb_height) continue;
        for (int sx = 0; sx < size; sx++) {
          int px = x + col * size + sx;
          if (px < 0 || px >= fb_width) continue;
          fb[py * fb_width + px] = color;
        }
      }
    }
  }
}

// Draw a scaled 8×8 character with transparent background (foreground pixels only).
static void fruitjam_draw_char_8x8_scaled_transparent(uint8_t *fb, int fb_width,
                                                       int fb_height,
                                                       int x, int y, unsigned char c,
                                                       uint8_t fg, int size) {
  if (size < 1) size = 1;
  if (x >= fb_width || y >= fb_height ||
      (x + 8 * size) <= 0 || (y + 8 * size) <= 0) return;
  const uint8_t *glyph = &unscii_8_thin[c * 8];
  for (int row = 0; row < 8; row++) {
    uint8_t bits = glyph[row];
    for (int col = 0; col < 8; col++) {
      if (!(bits & (0x80 >> col))) continue;
      for (int sy = 0; sy < size; sy++) {
        int py = y + row * size + sy;
        if (py < 0 || py >= fb_height) continue;
        for (int sx = 0; sx < size; sx++) {
          int px = x + col * size + sx;
          if (px < 0 || px >= fb_width) continue;
          fb[py * fb_width + px] = fg;
        }
      }
    }
  }
}

#endif // FRUITJAM_FONT_H
